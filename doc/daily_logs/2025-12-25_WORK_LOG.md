# DailyPort 작업 로그 (2025-12-25)

## 작업 요약
- **분석 엔진 고도화**: 상장 초기 종목 전략 산출(Algo Picks), ROE 계산 로직 추가(Value Picks)
- **데이터 안정성 확보**: 야후 API Fallback/Caching 및 수급 데이터 조회 범위 확장(200일)
- **UI/UX 대규모 개선**: `Stone` 테마 적용, 매매 전략 UI 고도화(V2.1), 데이터 로딩 버그 수정

## 상세 내역

### 1. 🛠 분석 엔진 및 데이터 로직 개선
- **Algo Picks 데이터 커버리지 확대 (`analyzer_daily.py`)**:
    - 최소 데이터 요구량을 120일 → **20일**로 완화하여 신규 상장주(`125490` 등)도 전략 산출 가능하도록 개선.
    - 불완전 데이터 시 `is_abnormal` 플래그로 UI 경고 표시.
- **Value Picks 활성화 (`batch_financial_quarterly.py`)**:
    - 재무제표 크롤링 시 당기순이익/자본총계 누락 문제를 해결하여 `ROE` 계산 로직 구현.
    - 과거 분기(2024 3Q) 데이터 백필(Backfill)을 통해 Value Pick 리스트가 비어있던 문제 해결.
- **수급 데이터 조회 범위 확장**:
    - 외인/기관 수급 차트가 최근 60일만 나오던 문제를 해결하기 위해 `analyzer_daily.py` 조회 범위를 **200일**로 확장.

### 2. 🛡 데이터 안정성 및 장애 대응
- **Yahoo API 쿼터 보호 (`market-data.ts`)**:
    - `unstable_cache` 적용 (메모리 60초 + DB 10분 이중 캐싱)으로 API 호출 최소화.
- **안전한 Fallback 시스템 (`actions-analysis.ts`)**:
    - 야후 API 장애(429 Error) 발생 시, 앱 크래시 없이 Admin Report 데이터로 자동 전환되는 복구 로직 구현.

### 3. 🎨 UI/UX 및 디자인 시스템
- **Global Theme 업데이트**:
    - 차가운 `Neutral` 톤을 따뜻한 **`Stone`** 계열로 전면 교체 (Sidebar, Header, Charts, Text).
    - 시각적 피로도를 낮추고 고급스러운 분위기 조성.
- **매매 전략 UI 고도화 (Objective V2.1)**:
    - 단순 목표가 표시를 넘어 **`WAIT`(관망) / `ACTIVE`(진입)** 상태 구분 도입.
    - 기술적 지표(RSI, Volatility)에 기반한 **확신(Confidence) 플래그** 및 경고 문구 추가.
- **버그 수정**:
    - 분석 페이지 무한 로딩 해결, 차트 `Value is null` 에러 및 줌인/아웃 동기화 문제 해결.

## 향후 계획
- **비상용 Python Bridge**: 야후 API 장기 장애 대비 로컬 Python (`FinanceDataReader`) 백업 파이프라인 구축 (`todo.md`).
- **모바일 뷰 최적화**: 분석 페이지의 모바일 가독성 개선 작업.
